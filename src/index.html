<!DOCTYPE html>
<html>
<head>
  <title>Image Generator</title>
</head>
<body>
  <h1>Image Generator</h1>

  <form id="inputForm">
    <label for="name">Name:</label>
    <input type="text" id="name" required><br><br>

    <label for="rifle">PTE or PTE(P):</label>
    <input type="text" id="rifle" readonly>
    <br>
    <input type="checkbox" id="PTE" value="PTE">
    <label for="PTE">PTE</label>
    
    <input type="checkbox" id="PTE(P)" value="PTE(P)">
    <label for="PTE(P)">PTE(P)</label>
    
    <br><br>
    
    <label for="badge">Corps:</label>
    <input type="text" id="badge" readonly>
    <br>
    <input type="checkbox" id="Command" value="Command">
    <label for="Command">Command</label>
    
    <input type="checkbox" id="Echo" value="Echo">
    <label for="Echo">Echo</label>
    
    <input type="checkbox" id="GM" value="GM">
    <label for="GM">GM</label>
    
    <input type="checkbox" id="Golf" value="Golf">
    <label for="Golf">Golf</label>
    
    <input type="checkbox" id="Hotel" value="Hotel">
    <label for="Hotel">Hotel</label>
    
    <input type="checkbox" id="Infantry" value="Infantry">
    <label for="Infantry">Infantry</label>
    
    <input type="checkbox" id="Mike" value="Mike">
    <label for="Mike">Mike</label>
    
    <input type="checkbox" id="Pronto" value="Pronto">
    <label for="Pronto">Pronto</label>
    
    <input type="checkbox" id="Victor" value="Victor">
    <label for="Victor">Victor</label>
    
    <br><br>
    
    <label for="uniformColor">Uniform Color:</label>
    <input type="text" id="uniformColor" readonly>
    <br>
    <input type="checkbox" id="Brown" value="Brown">
    <label for="Brown">Brown</label>
    
    <input type="checkbox" id="Blue" value="Blue">
    <label for="Blue">Blue</label>
    
    <br><br>
    
    <label for="citations">Citations:</label>
    <input type="text" id="citations" readonly><br><br>

    <text><underline>Operational Service Citations</underline><text><br>

    <input type="checkbox" id="Campaign" value="Campaign">
    <label for="Campaign">Campaign</label>
    
    <input type="checkbox" id="Campaign1" value="Campaign1">
    <label for="Campaign1">Campaign1</label>
    
    <input type="checkbox" id="Campaign2" value="Campaign2">
    <label for="Campaign2">Campaign2</label>
    
    <input type="checkbox" id="Campaign3" value="Campaign3">
    <label for="Campaign3">Campaign3</label><br>

    <text><underline>Period of Service Citations</underline></text><br>

    <input type="checkbox" id="1Year" value="1 Year">
    <label for="1Year">1 Year</label>
    
    <input type="checkbox" id="2Year" value="2 Year">
    <label for="2Year">2 Year</label>
    
    <input type="checkbox" id="3Year" value="3 Year">
    <label for="3Year">3 Year</label>
    
    <input type="checkbox" id="4Year" value="4 Year">
    <label for="4Year">4 Year</label><br>

    <text><underline>Member Skill Awards</underline></text><br>

    <input type="checkbox" id="Aviation" value="Aviation">
    <label for="Aviation">Aviation</label>
    
    <input type="checkbox" id="Medical" value="Medical">
    <label for="Medical">Medical</label><br>

    <text><underline>Leadership Awards</underline></text><br>

    <input type="checkbox" id="Protagonist" value="Protagonist">
    <label for="Protagonist">Protagonist</label>
    
    <input type="checkbox" id="JuniorLeadership" value="Junior Leadership">
    <label for="JuniorLeadership">Junior Leadership</label>
    
    <input type="checkbox" id="SeniorLeadership" value="Senior Leadership">
    <label for="SeniorLeadership">Senior Leadership</label><br>
    
    <text><underline>Non-Operational Awards</underline></text><br>

    <input type="checkbox" id="Atlas" value="Atlas">
    <label for="Atlas">Atlas</label>
    
    <input type="checkbox" id="Instructor" value="Instructor">
    <label for="Instructor">Instructor</label>
    
    <input type="checkbox" id="Watchman" value="Watchman">
    <label for="Watchman">Watchman</label>
    
    <input type="checkbox" id="Architect" value="Architect">
    <label for="Architect">Architect</label>
    
    <input type="checkbox" id="BrokenLance" value="Broken Lance">
    <label for="BrokenLance">Broken Lance</label><br>
    
    <input type="checkbox" id="Diplomat" value="Diplomat">
    <label for="Diplomat">Diplomat</label>
    
    <input type="checkbox" id="PublicRelation" value="Public Relation">
    <label for="PublicRelation">Public Relation</label>
    
    <input type="checkbox" id="GroupDevelopment" value="Group Development">
    <label for="GroupDevelopment">Group Development</label>
    
    <input type="checkbox" id="Founders" value="Founders">
    <label for="Founders">Founders</label>

    <input type="checkbox" id="Beyond" value="Beyond">
    <label for="Beyond">Beyond</label><br>

    <text><underline>Operational Awards</underline></text><br>
    
    <input type="checkbox" id="Gallantry" value="Gallantry">
    <label for="Gallantry">Gallantry</label>
    
    <input type="checkbox" id="CrossOfValour" value="Cross Of Valour">
    <label for="CrossOfValour">Cross Of Valour</label>
    
    <input type="checkbox" id="StarOfCourage" value="Star Of Courage">
    <label for="StarOfCourage">Star Of Courage</label>
    


    <br><br>
    
    <label for="trainingBadges">Training Badges:</label>
    <input type="text" id="trainingBadges"><br><br>

    <text><underline>Misc</underline></text><br>

    <input type="checkbox" id="RE" value="RE">
    <label for="RE">RE</label><br>
    
    <text><underline>Paratrooper</underline></text><br>

    <input type="checkbox" id="PT" value="PT">
    <label for="PT">PT</label>
    
    <input type="checkbox" id="HALO" value="HALO">
    <label for="HALO">HALO</label>
    
    <input type="checkbox" id="JM" value="JM">
    <label for="JM">JM</label>
    <br>

    <text><underline>IDF</underline></text><br>

    <input type="checkbox" id="BIDF" value="BIDF">
    <label for="BIDF">BIDF</label>
    
    <input type="checkbox" id="AIDF" value="AIDF">
    <label for="AIDF">AIDF</label>
    
    <input type="checkbox" id="BCIDF" value="BCIDF">
    <label for="BCIDF">BCIDF</label><br>
    
    <text><underline>Staff</underline></text><br>

    <input type="checkbox" id="NCO" value="NCO">
    <label for="NCO">NCO</label>
    
    <input type="checkbox" id="Platoon" value="Platoon">
    <label for="Platoon">Platoon</label>
    
    <input type="checkbox" id="Company" value="Company">
    <label for="Company">Company</label><br>

    <text><underline>Special Forces</underline></text><br>

    <input type="checkbox" id="Ranger" value="Ranger">
    <label for="Ranger">Ranger</label>
    
    <input type="checkbox" id="Commando" value="Commando">
    <label for="Commando">Commando</label>
    
    <input type="checkbox" id="SASR" value="SASR">
    <label for="SASR">SASR</label>
    <br>

    <text><underline>Rotary</underline></text><br>

    <input type="checkbox" id="BR" value="BR">
    <label for="BR">BR</label>
    
    <input type="checkbox" id="AR" value="AR">
    <label for="AR">AR</label>
    
    <input type="checkbox" id="ER" value="ER">
    <label for="ER">ER</label>
    <br>

    <text><underline>Fixed-Wing</underline></text><br>

    <input type="checkbox" id="BF" value="BF">
    <label for="BF">BF</label>
    
    <input type="checkbox" id="AF" value="AF">
    <label for="AF">AF</label>
    
    <input type="checkbox" id="EF" value="EF">
    <label for="EF">EF</label>
    <br>

    <text><underline>CQB</underline></text><br>

    <input type="checkbox" id="BCQB" value="BCQB">
    <label for="BCQB">BCQB</label>
    
    <input type="checkbox" id="ACQB" value="ACQB">
    <label for="ACQB">ACQB</label>
    
    <input type="checkbox" id="ECQB" value="ECQB">
    <label for="ECQB">ECQB</label>
    <br>

    <text><underline>Medical</underline></text><br>

    <input type="checkbox" id="BM" value="BM">
    <label for="BM">BM</label>
    
    <input type="checkbox" id="AM" value="AM">
    <label for="AM">AM</label>
    
    <input type="checkbox" id="EM" value="EM">
    <label for="EM">EM</label>
    
    <input type="checkbox" id="PR" value="PR">
    <label for="PR">PR</label>
    <br>

    <text><underline>Armoured</underline></text><br>

    <input type="checkbox" id="Driver" value="Driver">
    <label for="Driver">Driver</label>
    
    <input type="checkbox" id="Gunner" value="Gunner">
    <label for="Gunner">Gunner</label>
    
    <input type="checkbox" id="Commander" value="Commander">
    <label for="Commander">Commander</label>
    <br>

    <text><underline>Radioman</underline></text><br>

    <input type="checkbox" id="FO" value="FO">
    <label for="FO">FO</label>
    
    <input type="checkbox" id="JTAC" value="JTAC">
    <label for="JTAC">JTAC</label>
    <br>

    <text><underline>Weapons</underline></text><br>

    <input type="checkbox" id="Rifle" value="Rifle">
    <label for="Rifle">Rifle</label>
    
    <input type="checkbox" id="Pistol" value="Pistol">
    <label for="Pistol">Pistol</label>
    
    <input type="checkbox" id="AT" value="AT">
    <label for="AT">AT</label>
    
    <input type="checkbox" id="Sniper" value="Sniper">
    <label for="Sniper">Sniper</label>
    
    <br><br>
      <!-- Sixth checkbox list - Rank -->
      <label for="rank">Rank:</label>
      <input type="text" id="rank" name="rank" readonly>
<br>
  <input type="checkbox" id="LCPL" value="LCPL">
  <label for="LCPL">LCPL</label>

  <input type="checkbox" id="LCPLV" value="LCPLV">
  <label for="LCPLV">LCPLV</label>
  <br>
  <input type="checkbox" id="CPL" value="CPL">
  <label for="CPL">CPL</label>

  <input type="checkbox" id="CPLV" value="CPLV">
  <label for="CPLV">CPLV</label>
  <br>
  <input type="checkbox" id="SGT" value="SGT">
  <label for="SGT">SGT</label>

  <input type="checkbox" id="SGTV" value="SGTV">
  <label for="SGTV">SGTV</label>
  <br>
  <input type="checkbox" id="WO2" value="WO2">
  <label for="WO2">WO2</label>

  <input type="checkbox" id="WO1" value="WO1">
  <label for="WO1">WO1</label>
  <br>
  <input type="checkbox" id="LT" value="LT">
  <label for="LT">LT</label>
  <br>
  <input type="checkbox" id="CAPT" value="CAPT">
  <label for="CAPT">CAPT</label>

  <input type="checkbox" id="FLT" value="FLT">
  <label for="FLT">FLT</label>
  <br>
  <input type="checkbox" id="MAJ" value="MAJ">
  <label for="MAJ">MAJ</label>

  <input type="checkbox" id="SQLD" value="SQLD">
  <label for="SQLD">SQLD</label>
  <br>
  <input type="checkbox" id="LTCOL" value="LTCOL">
  <label for="LTCOL">LTCOL</label>

  <input type="checkbox" id="WGCO" value="WGCO">
  <label for="WGCO">WGCO</label>

  <br><br>
    <script>
  // First checkbox list - PTE or PTE(P)
      const checkboxPTE = document.getElementById("PTE");
      const checkboxPTEP = document.getElementById("PTE(P)");
      const rifleField = document.getElementById("rifle");
    
      checkboxPTE.addEventListener("change", updateRifleField);
      checkboxPTEP.addEventListener("change", updateRifleField);
    
      function updateRifleField() {
        let rifle = "";
    
        if (checkboxPTE.checked) {
          rifle += checkboxPTE.value + " ";
        }
    
        if (checkboxPTEP.checked) {
          rifle += checkboxPTEP.value + " ";
        }
    
        rifleField.value = rifle.trim();
      }
    
  // Second checkbox list - Corps
      const checkboxes = document.querySelectorAll('#Command, #Echo, #GM, #Golf, #Hotel, #Infantry, #Mike, #Pronto, #Victor');
      const badgeField = document.getElementById("badge");
    
      checkboxes.forEach((checkbox) => {
        checkbox.addEventListener("change", updateBadgeField);
      });
    
      function updateBadgeField() {
        let badge = "";
    
        checkboxes.forEach((checkbox) => {
          if (checkbox.checked) {
            badge += checkbox.value + " ";
          }
        });
    
        badgeField.value = badge.trim();
      }
    
  // Third checkbox list - Uniform Color
      const checkboxBrown = document.getElementById("Brown");
      const checkboxBlue = document.getElementById("Blue");
      const uniformColorField = document.getElementById("uniformColor");
    
      checkboxBrown.addEventListener("change", updateUniformColorField);
      checkboxBlue.addEventListener("change", updateUniformColorField);
    
      function updateUniformColorField() {
        let uniformColor = "";
    
        if (checkboxBrown.checked) {
          uniformColor += checkboxBrown.value + " ";
        }
    
        if (checkboxBlue.checked) {
          uniformColor += checkboxBlue.value + " ";
        }
    
        uniformColorField.value = uniformColor.trim();
      }
    
  // Fourth checkbox list - Citations
  const citationsCheckboxes = document.querySelectorAll('input[type="checkbox"][value^="Campaign"], input[type="checkbox"][value$="Year"], input[type="checkbox"][value="Aviation"], input[type="checkbox"][value="Medical"], input[type="checkbox"][value="Protagonist"], input[type="checkbox"][value="Junior Leadership"], input[type="checkbox"][value="Senior Leadership"], input[type="checkbox"][value="Atlas"], input[type="checkbox"][value="Instructor"], input[type="checkbox"][value="Watchman"], input[type="checkbox"][value="Architect"], input[type="checkbox"][value="Broken Lance"], input[type="checkbox"][value="Diplomat"], input[type="checkbox"][value="Public Relation"], input[type="checkbox"][value="Group Development"], input[type="checkbox"][value="Founders"], input[type="checkbox"][value="Gallantry"], input[type="checkbox"][value="Cross Of Valour"], input[type="checkbox"][value="Star Of Courage"], input[type="checkbox"][value="Beyond"]');
  const citationsField = document.getElementById("citations");

  citationsCheckboxes.forEach((checkbox) => {
    checkbox.addEventListener("change", updateCitationsField);
  });

  function updateCitationsField() {
    let citations = Array.from(citationsCheckboxes)
      .filter((checkbox) => checkbox.checked)
      .map((checkbox) => checkbox.value)
      .join(",");

    citationsField.value = citations;
  }

    // Fifth checkbox list - Training Badges
    const trainingBadgesCheckboxes = document.querySelectorAll('#RE, #PT, #HALO, #JM, #BIDF, #AIDF, #BCIDF, #NCO, #Platoon, #Company, #Ranger, #Commando, #SASR, #BR, #AR, #ER, #BF, #AF, #EF, #BCQB, #ACQB, #ECQB, #BM, #AM, #EM, #PR, #Driver, #Gunner, #Commander, #FO, #JTAC, #Rifle, #Pistol, #AT, #Sniper');
  const trainingBadgesField = document.getElementById("trainingBadges");

  trainingBadgesCheckboxes.forEach((checkbox) => {
    checkbox.addEventListener("change", updateTrainingBadgesField);
  });

  function updateTrainingBadgesField() {
    const checkedTrainingBadges = Array.from(trainingBadgesCheckboxes)
      .filter((checkbox) => checkbox.checked)
      .map((checkbox) => checkbox.value);

    trainingBadgesField.value = checkedTrainingBadges.join(",");
  }

  // Sixth checkbox list - Rank
  const checkboxesRank = document.querySelectorAll('#LCPL, #LCPLV, #CPL, #CPLV, #SGT, #SGTV, #WO2, #WO1, #LT, #CAPT, #FLT, #MAJ, #SQLD, #LTCOL, #WGCO');
  const rankField = document.getElementById("rank");

  checkboxesRank.forEach((checkbox) => {
    checkbox.addEventListener("change", updateRankField);
  });

  function updateRankField() {
    let rank = "";

    checkboxesRank.forEach((checkbox) => {
      if (checkbox.checked) {
        rank += checkbox.value + " ";
      }
    });

    rankField.value = rank.trim();
  }
</script>

</script>
    
<br>

    <button type="submit">Generate Image</button>
  </form>

  <div id="imageContainer"></div>

  <script type="text/javascript" src="/index.js"></script>
  <script>
    document.getElementById("inputForm").addEventListener("submit", function(event) {
      event.preventDefault();

      // Gather user input
      var name = document.getElementById("name").value;
      var rank = document.getElementById("rank").value;
      var citations = document.getElementById("citations").value.split(",")
      var trainingBadges = document.getElementById("trainingBadges").value.split(",")
      var uniformColor = document.getElementById("uniformColor").value;
      var rifle = document.getElementById("rifle").value;
      var badge = document.getElementById("badge").value;
      // Create data object
      console.log(trainingBadges)
      var data = {
        name: name,
        rank: rank,
        citations: citations,
        TrainingMedals: trainingBadges,
        Uniform: uniformColor,
        RifleManBadge : rifle,
        badge: badge,

      };
    
      if(data.citations.length == 1 && data.citations[0] == "")
      data.citations = [];
      if(data.TrainingMedals.length == 1 && data.TrainingMedals[0] == "")
      data.TrainingMedals = [];

      // Call the main function from index.js and display the returned image

      fetch('/update', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
      .then(response => response.blob())
      .then(imageBlob => {
        // Create a URL for the image blob
        var imageUrl = URL.createObjectURL(imageBlob);
        // Create an <img> element
        var imgElement = document.createElement("img");
        console.log(imageUrl)

        // Set the source of the image to the generated image
        imgElement.src = imageUrl;

        // Append the image element to the "imageContainer" div
        document.getElementById("imageContainer").appendChild(imgElement);
      })
      .catch(error => {
        console.error('Error:', error);
      });
    });
  </script>
</body>
</html>
